<div class="head">
  <div class="title">
    <h3>Mis Procesos</h3>
  </div>
  <div class="options">
    <input
      type="text"
      id="process"
      name="process"
      placeholder="Buscar proceso..."
      [(ngModel)]="processSearch"
    />
    <button class="buttonFilter" (click)="toggleDiv()">
      <span class="fa-solid fa-filter"></span>
    </button>
  </div>
</div>

<div class="table-container">
  <div class="table">
    <table mat-table [dataSource]="dataSource" class="mat-elevation-z8">
      <!-- Numero Radicado Column -->
      <ng-container matColumnDef="numeroRadicado">
        <th mat-header-cell *matHeaderCellDef>Numero Radicado</th>
        <td mat-cell *matCellDef="let proceso">{{ proceso.numeroRadicado }}</td>
      </ng-container>

      <!-- Despacho Column -->
      <ng-container matColumnDef="despacho">
        <th mat-header-cell *matHeaderCellDef>Despacho</th>
        <td mat-cell *matCellDef="let proceso">{{ proceso.despacho }}</td>
      </ng-container>

      <!-- Tipo Proceso Column -->
      <ng-container matColumnDef="tipoProceso">
        <th mat-header-cell *matHeaderCellDef>Tipo Proceso</th>
        <td mat-cell *matCellDef="let proceso">{{ proceso.tipoProceso }}</td>
      </ng-container>

      <!-- Fecha Radicacion Column -->
      <ng-container matColumnDef="fechaRadicacion">
        <th mat-header-cell *matHeaderCellDef>Fecha Radicacion</th>
        <td mat-cell *matCellDef="let proceso">
          {{ proceso.fechaRadicacion }}
        </td>
      </ng-container>

      <!-- Columnas de la tabla -->
      <tr
        mat-header-row
        *matHeaderRowDef="[
          'numeroRadicado',
          'despacho',
          'tipoProceso',
          'fechaRadicacion'
        ]"
      ></tr>
      <tr
        mat-row
        *matRowDef="
          let row;
          columns: [
            'numeroRadicado',
            'despacho',
            'tipoProceso',
            'fechaRadicacion'
          ]
        "
        style="cursor: pointer"
        (click)="redirectToOtherComponent(row)"
      ></tr>
    </table>

    <mat-paginator
      [length]="totalItems"
      [pageSize]="pageSize"
      (page)="onPageChange($event)"
    ></mat-paginator>
  </div>
  <div *ngIf="mostrarDiv" class="filter">
    <h4>FILTRAR</h4>
    <div class="filter1">
      <h5>Rango de fechas</h5>
      <div class="calendar">
        <h6>Fecha inicio</h6>
        <mat-form-field style="height: 78px">
          <input
            class="inputcalendar"
            [matDatepicker]="picker"
            placeholder="Selecciona una fecha"
            [(ngModel)]="initDate"
            [max]="maxDate"
            (dateChange)="dateChanged()"
          />
          <mat-datepicker-toggle
            matSuffix
            [for]="picker"
          ></mat-datepicker-toggle>
          <mat-datepicker #picker></mat-datepicker>
        </mat-form-field>
        <button class="butoncalendar" (click)="picker.open()">
          <span class="fa-solid fa-calendar-days"></span>
        </button>
      </div>
      <div class="calendar">
        <h6>Fecha final</h6>
        <mat-form-field style="height: 78px; padding: 0%">
          <input
            class="inputcalendar"
            [matDatepicker]="picker2"
            placeholder="Selecciona una fecha"
            [(ngModel)]="endDate"
            [max]="maxDate"
            (dateChange)="dateChanged()"
          />
          <mat-datepicker-toggle
            matSuffix
            [for]="picker2"
          ></mat-datepicker-toggle>
          <mat-datepicker #picker2></mat-datepicker>
        </mat-form-field>
        <button class="butoncalendar" (click)="picker2.open()">
          <span class="fa-solid fa-calendar-days"></span>
        </button>
      </div>
    </div>
    <div class="filter2">
      <h5>Estado proceso</h5>
      <div *ngFor="let opcion of processStatusFilter">
        <input
          class="checkbox"
          type="checkbox"
          [checked]="opcion.checked"
          (change)="onCheckboxChange(opcion, 'processStatusFilter')"
        />
        {{ opcion.texto }}
      </div>
    </div>
    <div class="selectfilter">
      <h5>Tipo de proceso</h5>
      <select id="options" [(ngModel)]="selectedProcessType" (ngModelChange)="onTypeProcessChange($event)">
        <option *ngFor="let option of processTypeFilter" [value]="option.valor">
          {{ option.texto }}
        </option>
      </select>
    </div>
    <div class="botonfiltro">
      <button class="buttonfilterAplicate" (click)="applyFilters()">
        Aplicar
      </button>
    </div>
  </div>
</div>
