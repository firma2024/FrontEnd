<div class="head">
  <div class="title">
    <h2>Mis Procesos</h2>
  </div>
  <div class="options">
    <input
      type="text"
      id="process"
      name="process"
      placeholder="Buscar proceso..."
      [(ngModel)]="processSearch"
    />
    <button class="buttonFilter" (click)="toggleDiv()">
      <span class="fa-solid fa-filter"></span>
    </button>
    <button class="buttonCreate" routerLink="/registerprocess">
      Crear Proceso
    </button>
  </div>
</div>

<div class="table-container">
  <div class="table">
    <table mat-table [dataSource]="dataSource" class="mat-elevation-z8">
      <ng-container matColumnDef="Radicado">
        <th mat-header-cell *matHeaderCellDef>Radicado</th>
        <td mat-cell *matCellDef="let element">{{ element.numeroRadicado }}</td>
      </ng-container>

      <ng-container matColumnDef="despacho">
        <th mat-header-cell *matHeaderCellDef>Despacho</th>
        <td mat-cell *matCellDef="let element">{{ element.despacho }}</td>
      </ng-container>

      <ng-container matColumnDef="tipoProceso">
        <th mat-header-cell *matHeaderCellDef>Tipo Proceso</th>
        <td mat-cell *matCellDef="let element">{{ element.tipoProceso }}</td>
      </ng-container>

      <ng-container matColumnDef="abogado">
        <th mat-header-cell *matHeaderCellDef>Abogado</th>
        <td mat-cell *matCellDef="let element">{{ element.abogado }}</td>
      </ng-container>

      <ng-container matColumnDef="fechaRadicacion">
        <th mat-header-cell *matHeaderCellDef>Fecha Radicación</th>
        <td mat-cell *matCellDef="let element">
          {{ element.fechaRadicacion }}
        </td>
      </ng-container>

      <ng-container matColumnDef="estado">
        <th mat-header-cell *matHeaderCellDef>Estado</th>
        <td
          mat-cell
          *matCellDef="let element"
          [ngStyle]="{
            color: element.estadoVisto ? 'red' : 'rgba(170,37,53,255)'
          }"
        >
          {{ element.estado ? "Actuaciones sin revisar" : "" }}
        </td>
      </ng-container>

      <!-- Definición de las filas de la tabla -->
      <tr
        mat-header-row
        *matHeaderRowDef="[
          'Radicado',
          'despacho',
          'tipoProceso',
          'abogado',
          'fechaRadicacion',
          'estado'
        ]"
      ></tr>
      <tr
        mat-row
        *matRowDef="
          let row;
          columns: [
            'Radicado',
            'despacho',
            'tipoProceso',
            'abogado',
            'fechaRadicacion',
            'estado'
          ]
        "
        (click)="redirectToOtherComponent(row)"
      ></tr>
    </table>

    <mat-paginator
      [length]="totalItems"
      [pageSize]="pageSize"
      (page)="onPageChange($event)"
    >
    </mat-paginator>
  </div>
  <div *ngIf="mostrarDiv" class="filter">
    <h4>FILTRAR</h4>
    <div class="filter1">
      <h5>Rango de fechas</h5>
      <div class="calendar">
        <h6>Fecha inicio</h6>
        <mat-form-field style="height: 78px">
          <input
            class="inputcalendar"
            [matDatepicker]="picker"
            placeholder="Selecciona una fecha"
            [(ngModel)]="selectedDate"
          />
          <mat-datepicker-toggle
            matSuffix
            [for]="picker"
          ></mat-datepicker-toggle>
          <mat-datepicker #picker></mat-datepicker>
        </mat-form-field>
        <button class="butoncalendar" (click)="picker.open()">
          <span class="fa-solid fa-calendar-days"></span>
        </button>
      </div>
      <div class="calendar">
        <h6>Fecha final</h6>
        <mat-form-field style="height: 78px; padding: 0%">
          <input
            class="inputcalendar"
            [matDatepicker]="picker"
            placeholder="Selecciona una fecha"
            [(ngModel)]="selectedDate"
          />
          <mat-datepicker-toggle
            matSuffix
            [for]="picker"
          ></mat-datepicker-toggle>
          <mat-datepicker #picker></mat-datepicker>
        </mat-form-field>
        <button class="butoncalendar" (click)="picker.open()">
          <span class="fa-solid fa-calendar-days"></span>
        </button>
      </div>
    </div>
    <div class="filter2">
      <h5>Estado proceso</h5>
      <div *ngFor="let opcion of processFilter">
        <input
          class="checkbox"
          type="checkbox"
          [checked]="opcion.checked"
          (change)="onCheckboxChange(opcion, 'processFilter')"
        />
        {{ opcion.texto }}
      </div>
    </div>
    <div class="selectfilter">
      <h5>Tipo de proceso</h5>
      <select id="options" [(ngModel)]="selectedOption">
        <option *ngFor="let option of options" [value]="option.value">{{ option.label }}</option>
      </select>
    </div>    
    <div class="botonfiltro">
      <button class="buttonfilterAplicate">Aplicar</button>
    </div>
  </div>
</div>
